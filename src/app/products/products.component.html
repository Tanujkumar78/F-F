<div class="product_container">
  <app-header></app-header>

  <div class="video-showcase">
    <video autoplay muted loop playsinline class="inline-video">
      <source src="https://videos.pexels.com/video-files/7578550/7578550-uhd_3840_2160_30fps.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    <div class="video-text">
      <h1>Find Your Perfect Space</h1>
      <p>Comfortable Flats & Stylish Rooms Tailored to Your Needs</p>

       <div class="search-section">
    <div class="search-container">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchTerm"
          (input)="onSearchInput()"
          placeholder="Search rooms by name, type, size, location..." 
          class="search-input"
        />
        <!-- <button class="search-btn" (click)="filterRooms()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="21 21l-4.35-4.35"></path>
            <line x1="8" y1="11" x2="14" y2="11"></line>
          </svg>
        </button> -->
      </div>
      
      <!-- Filter Buttons -->
      <div class="filter-buttons">
        <button 
          class="filter-btn" 
          [class.active]="selectedFilter === 'all'"
          (click)="setFilter('all')">
          All Rooms ({{ rooms.length }})
        </button>

        <button 
          class="filter-btn" 
          [class.active]="selectedFilter === 'available'"
          (click)="setFilter('available')">
          Available ({{ getAvailableCount() }})
        </button>
        <button 
          class="filter-btn" 
          [class.active]="selectedFilter === 'booked'"
          (click)="setFilter('booked')">
          Booked ({{ getBookedCount() }})
        </button>
        
        <!-- <button 
          class="filter-btn" 
          [class.active]="selectedFilter === '1BHK'"
          (click)="setFilter('1BHK')">
          1BHK
        </button>
        <button 
          class="filter-btn" 
          [class.active]="selectedFilter === '2BHK'"
          (click)="setFilter('2BHK')">
          2BHK
        </button>
        <button 
          class="filter-btn" 
          [class.active]="selectedFilter === '3BHK'"
          (click)="setFilter('3BHK')">
          3BHK
        </button>
        <button 
          class="filter-btn" 
          [class.active]="selectedFilter === 'shared'"
          (click)="setFilter('shared')">
          Shared
        </button> -->
        <select class="select-option" #value (change)="setFilter(value.value)">
  <!-- <option value="all">All Rooms ({{ rooms.length }})</option> -->
   <option value="other" selected disabled>Other</option>
  <option value="1BHK">1BHK</option>
  <option value="2BHK">2BHK</option>
  <option value="3BHK">3BHK</option>
  <option value="shared">Shared</option>  
</select>


      </div>

      <!-- Sort Options
      <div class="sort-options">
        <label for="sort-select">Sort by:</label>
        <select id="sort-select" (change)="onSortChange($event)" class="sort-select">
          <option value="">Default</option>
          <option value="name">Name</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
          <option value="availability">Availability</option>
        </select>
      </div> -->

      <!-- Results Count -->
      <div class="results-info">
        <p>{{ filteredRooms.length }} rooms found</p>
        <button class="refresh-btn" (click)="refreshRooms()" title="Refresh data">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M3 21v-5h5"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
      
    </div>
  </div>


  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>Loading rooms...</p>
  </div>

  <!-- Room Grid -->
 <!-- Room Grid -->
<div *ngIf="!isLoading" class="main_all">
  <div *ngFor="let room of pagedRooms; trackBy: trackByRoomId" 
       class="main_" 
       (click)="goToDetails(room.id)">
    <h3>{{ room.name }}</h3>
    <img [src]="room.image" [alt]="room.name" />

    <div class="info-row">
      <p><strong>Type:</strong> {{ room.type }}</p>
      <p><strong>Size:</strong> {{ room.size }}</p>
    </div>

    <div class="info-row">
      <p><strong>Price:</strong> {{ formatPrice(room) }}</p>
      <p *ngIf="room.priceDetails?.yearly"><strong>Yearly:</strong> â‚¹{{ room.priceDetails.yearly }}</p>
      <p>
        <strong>Status:</strong>
        <span class="status" [ngClass]="room.isAvailable ? 'available' : 'booked'">
          {{ room.isAvailable ? 'Available' : 'Booked' }}
        </span>
      </p>
    </div>
  </div>
</div>

<!-- Pagination Controls -->
<div *ngIf="!isLoading && totalPages > 1" class="pagination">
  <button (click)="prevPage()" [disabled]="currentPage === 1">&laquo; Prev</button>
  
  <button *ngFor="let page of [].constructor(totalPages); let i = index"
          (click)="goToPage(i + 1)"
          [class.active]="currentPage === i + 1">
    {{ i + 1 }}
  </button>
  
  <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next &raquo;</button>
</div>


  <!-- No Results -->
  <div *ngIf="!isLoading && filteredRooms.length === 0" class="no-results">
    <div class="no-results-content">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="21 21l-4.35-4.35"></path>
        <line x1="8" y1="11" x2="14" y2="11"></line>
      </svg>
      <h3 class="no-results-content-h3">No rooms found</h3>
      <p class="no-results-content-p">Try adjusting your search or filters</p>
      <button class="clear-filters-btn" (click)="clearFilters()">Clear All Filters</button>
    </div>
  </div>
</div>