<!-- Back Button -->
<div class="back-button-container">
  <button class="btn-back" (click)="goBack()">
    <i class="back-icon">‚Üê</i>
    Back
  </button>
</div>




<div class="profile-container" *ngIf="user; else notLoggedIn">
  <div class="profile-card">
    <!-- View Mode -->
    <div *ngIf="!isEditing">
      <h2>Welcome, {{ user.Fullname || user.username || 'User' }}!</h2>
      
      <div class="profile-info">
        <div class="info-row">
          <strong>Full Name:</strong> 
          <span>{{ user.Fullname || user.fullName || 'Not provided' }}</span>
        </div>
        
        <div class="info-row">
          <strong>Username:</strong> 
          <span>{{ user.username || user.Fullname || 'Not provided' }}</span>
        </div>
        
        <div class="info-row">
          <strong>Email:</strong> 
          <span>{{ user.Email || user.email || 'Not provided' }}</span>
        </div>
        
        <div class="info-row">
          <strong>Phone:</strong> 
          <span>{{ user.phone || 'Not provided' }}</span>
        </div>
        
        <div class="info-row">
          <strong>Address:</strong> 
          <span>{{ user.address || 'Not provided' }}</span>
        </div>
        
        <div class="info-row">
          <strong>Gender:</strong> 
          <span>{{ user.gender || 'Not provided' }}</span>
        </div>
        
        <div class="info-row">
          <strong>Date of Birth:</strong> 
          <span>{{ user.dob || 'Not provided' }}</span>
        </div>
      </div>

      <div class="button-container">
        <button class="btn-edit" (click)="toggleEdit()">Edit Profile</button>
        <button class="btn-logout" (click)="logout()">Logout</button>
      </div>
    </div>

    <!-- Edit Mode -->
    <div *ngIf="isEditing">
      <h2>Edit Profile</h2>
      
      <form (ngSubmit)="saveProfile()">
        <div class="form-group">
          <label>Full Name:</label>
          <input type="text" [(ngModel)]="user.Fullname" name="fullname" required>
        </div>
        
        <div class="form-group">
          <label>Email:</label>
          <input type="email" [(ngModel)]="user.Email" name="email" required>
        </div>
        
        <div class="form-group">
          <label>Phone:</label>
          <input type="tel" [(ngModel)]="user.phone" name="phone" placeholder="Enter your phone number">
        </div>
        
        <div class="form-group">
          <label>Address:</label>
          <textarea [(ngModel)]="user.address" name="address" rows="3" placeholder="Enter your address"></textarea>
        </div>
        
        <div class="form-group">
          <label>Gender:</label>
          <select [(ngModel)]="user.gender" name="gender">
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Date of Birth:</label>
          <input type="date" [(ngModel)]="user.dob" name="dob">
        </div>
        
        <div class="button-container">
          <button type="submit" class="btn-save">Save Changes</button>
          <button type="button" class="btn-cancel" (click)="cancelEdit()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<ng-template #notLoggedIn>
  <div class="profile-container">
    <div class="profile-card">
      <h2>No User Logged In</h2>
      <p>Please sign up or log in to view your profile.</p>
      <div class="button-container">
        <a routerLink="/login">
          <button class="btn-login">Go to Login</button>
        </a>
      </div>
    </div>
  </div>
</ng-template>
